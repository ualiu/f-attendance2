<header class="header">
  <div class="header-content">
    <div class="header-left">
      <button class="menu-toggle" onclick="toggleSidebar()" aria-label="Toggle menu">
        â˜°
      </button>
      <h1 class="logo"><%= organization ? organization.name : 'Attendance System' %></h1>
      <span class="subtitle">Attendance Management</span>
    </div>

    <div class="header-right">
      <% if (user) { %>
        <div class="user-info" onclick="toggleUserMenu(event)" style="cursor: pointer; position: relative;">
          <% if (user.profile_picture) { %>
            <img src="<%= user.profile_picture %>" alt="<%= user.name %>" class="user-avatar">
          <% } else { %>
            <div class="user-avatar-placeholder"><%= user.name.charAt(0) %></div>
          <% } %>
          <span class="user-name"><%= user.name %></span>
          <% if (user.role === 'super_admin') { %>
            <span class="user-role-badge super-admin">Super Admin</span>
          <% } else if (user.role === 'admin') { %>
            <span class="user-role-badge admin">Admin</span>
          <% } else { %>
            <span class="user-role"><%= user.role %></span>
          <% } %>
          <span style="margin-left: 0.25rem; font-size: 0.75em;">â–¼</span>

          <!-- Dropdown Menu -->
          <div id="userDropdown" class="user-dropdown" style="display: none;">
            <div class="dropdown-header">
              <strong><%= user.name %></strong>
              <small style="color: #666; display: block;"><%= user.email %></small>
            </div>

            <!-- Organization Clock -->
            <div class="dropdown-divider"></div>
            <div class="dropdown-item" style="cursor: default; background: #f8f9fa; padding: 0.75rem 1rem;">
              <div style="text-align: center;">
                <div style="font-size: 0.75rem; color: #6b7280; font-weight: 600; text-transform: uppercase; margin-bottom: 0.25rem;">
                  <span id="orgTimezoneName">Loading...</span>
                </div>
                <div id="orgCurrentTime" style="font-size: 1.25rem; font-weight: 700; color: #111827; font-variant-numeric: tabular-nums;">
                  --:--:-- --
                </div>
                <div id="orgCurrentDate" style="font-size: 0.875rem; color: #6b7280; margin-top: 0.25rem;">
                  ---------
                </div>
              </div>
            </div>

            <div class="dropdown-divider"></div>
            <a href="/auth/logout" class="dropdown-item">
              <span style="margin-right: 0.5rem;">ðŸšª</span> Logout
            </a>
          </div>
        </div>
      <% } %>
    </div>
  </div>
</header>

<div class="sidebar-overlay" onclick="toggleSidebar()"></div>

<script>
  // Expose organization timezone to JavaScript
  window.ORG_TIMEZONE = '<%= organization?.settings?.timezone || "America/New_York" %>';
</script>
